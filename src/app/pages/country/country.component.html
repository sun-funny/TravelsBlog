<div class="country-content-wrapper">
  <app-aside class="aside-country" [points]="points"></app-aside>

  <div class="country-background">
    <div class="overlay"></div>
    
    <div class="country-content" *ngIf="!isNotFound && country">
      <div class="country-header">
        <div class="header-title">
          <img [src]="getImageUrl(country.flag)" alt="{{country.country}} flag" class="country-flag">
          <h1>{{country.country}}</h1>
        </div>
        
      <div class="country-description">
        <h1>{{country.description}}</h1>
      </div>

      <div class="points-container">

        <!-- Кнопка добавления новой точки -->
        <div class="add-point-button-container">
          <button 
            pButton 
            type="button" 
            icon="pi pi-plus" 
            label="Добавить точку" 
            class="p-button-primary"
            (click)="toggleAddPointForm()">
          </button>
        </div>
      </div>

      <!-- Форма добавления точки -->
      <app-add-point-form 
        *ngIf="showAddPointForm"
        [countryId]="country.id"
        (pointAdded)="onPointAdded($event)"
        (cancelled)="onAddPointCancelled()">
      </app-add-point-form>
      
        <div *ngFor="let point of points" class="point-card" [id]="point.id">
          <h3>{{point.name}}</h3>
          <div [innerHTML]="point.description" class="point-description"></div>
          
          <p-carousel *ngIf="point.img?.length" 
            [value]="point.img" 
            [circular]="true" 
            [numVisible]="3" 
            [numScroll]="3">
            <ng-template let-image pTemplate="item">
              <div class="carousel-image-container">
                <img [src]="getImageUrl(image)" [alt]="point.name" class="carousel-image">
                <div class="zoom-icon" (click)="openImageModal(getImageUrl(image), point)">
                  <i class="pi pi-plus"></i>
                </div>
              </div>
            </ng-template>
          </p-carousel>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Модальное окно для изображений -->
<p-dialog 
  [(visible)]="displayModal" 
  [modal]="true" 
  [style]="{width: '80vw', maxWidth: '1200px'}" 
  [baseZIndex]="10000"
  [dismissableMask]="true"
  (onHide)="onModalHide()">
  <img [src]="selectedImage" [alt]="'Enlarged ' + (currentPoint?.name || 'image')" class="modal-image">
</p-dialog>

<div *ngIf="isNotFound" class="not-found">
  <h2>Country not found</h2>
  <p>The country you're looking for doesn't exist or has been removed.</p>
</div>